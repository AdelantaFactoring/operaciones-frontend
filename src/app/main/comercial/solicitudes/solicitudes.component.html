<div class="content-wrapper">
  <div class="content-body">
    <app-content-header [contentHeader]="contentHeader"></app-content-header>
    <core-card #coreCard [actions]="['collapse', 'reload']" (events)="onLimpiarFiltro($event)">
      <h4 class="card-title">Buscar por <small><i>(click aqu√≠ para expandir)</i></small></h4>
      <div class="card-body">
        <form [formGroup]="filtroForm">
          <div class="row">
            <div class="col-md-4 col-12">
              <div class="form-group">
                <label>Usuario</label>
                <ng-select appendTo="body" [clearable]="false" [items]="optUsuario" bindLabel="nombreCompleto"
                           placeholder="Usuario" bindValue="idUsuario" formControlName="usuario"
                           (ngModelChange)="onChangeUsuario()">
                </ng-select>
              </div>
            </div>
          </div>
        </form>
      </div>
    </core-card>
    <div class="card">
      <div class="card-body">
        <div class="row">
          <div class="d-flex flex-wrap mb-0">
            <div class="p-1">
              <button type="submit" rippleEffect class="btn btn-secondary" (click)="onRefrescar()">
                <i class="mr-0 mr-sm-1" data-feather="refresh-cw"></i>
                <span class="d-none d-sm-inline-block">Refrescar</span>
              </button>
            </div>
            <div class="pt-1 pb-1">
              <button class="btn btn-primary" rippleEffect
                      [routerLink]="['/comercial/solicitudes/solicitudes-form']"
                      skipLocationChange [queryParams]="" queryParamsHandling="merge">
                <i class="mr-0 mr-sm-1" data-feather="plus"></i><span class="d-none d-sm-inline-block">Nueva(s)
                  Solicitud(es)</span>
              </button>
            </div>
          </div>
        </div>
        <ul ngbNav #nav="ngbNav" [(activeId)]="activeId" class="nav-tabs">
          <li [ngbNavItem]="1">
            <a ngbNavLink>Factoring</a>
            <ng-template ngbNavContent>
              <app-solicitudes-grilla [paramsURL]="1"
                                      [idUsuario]="filtroForm.controls.usuario.value"></app-solicitudes-grilla>
            </ng-template>
          </li>
          <li [ngbNavItem]="2">
            <a ngbNavLink>Capital de Trabajo</a>
            <ng-template ngbNavContent>
              <app-solicitudes-grilla [paramsURL]="2"
                                      [idUsuario]="filtroForm.controls.usuario.value"></app-solicitudes-grilla>
            </ng-template>
          </li>
          <li [ngbNavItem]="3">
            <a ngbNavLink>Confirming</a>
            <ng-template ngbNavContent>
              <app-solicitudes-grilla [paramsURL]="3"
                                      [idUsuario]="filtroForm.controls.usuario.value"></app-solicitudes-grilla>
            </ng-template>
          </li>
        </ul>
        <div [ngbNavOutlet]="nav" class="mt-2"></div>
      </div>
    </div>
    <block-ui></block-ui>
  </div>
</div>
